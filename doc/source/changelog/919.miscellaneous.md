refactor to accommodate env variables