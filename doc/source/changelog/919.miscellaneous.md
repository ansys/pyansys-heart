adapt for environment variable support