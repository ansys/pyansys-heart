refactor to accomodate env variables